"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2947],{45078:(e,n,t)=>{t.d(n,{rX:()=>m,v2:()=>g,vP:()=>y});var a=t(68096),i=t(7726),l=t(98518),r=t(1761),o=t(27062),u=t(77101),c=t(85544),s=t(57383),d=t(85717),v=t(71436),p=t(45715);let g=()=>{let{initGithubAuth:e}=(0,v.nB)(),{initDriveAuth:n}=(0,d.cI)();return t=>{t===u.v8.GITHUB?e():t===u.v8.GDRIVE?n():t===u.v8.OUTLINE&&(0,p.so)()}},_=()=>{let e=(0,o.fS)("claudeai_paprika_sticky"),n=["enabled_web_search","enabled_bananagrams","enabled_sourdough","enabled_foccacia","enabled_mcp_tools","enabled_monkeys_in_a_barrel"];return e&&n.push("paprika_mode"),n},y=e=>{let{conversation:n,pendingConversationSettings:t}=(0,s.o)(),{account:a}=(0,r.YL)(),i=_();if(n){var l;return null==(l=n.conversationSettings)?void 0:l[e]}return i.includes(e)?null==a?void 0:a.settings[e]:null==t?void 0:t[e]},m=()=>{let{conversation:e,setPendingConversationSettings:n}=(0,s.o)(),{account:t}=(0,r.YL)(),o=_(),{track:u}=(0,l.st)(),{mutate:d}=(0,a.Jy)(),{mutate:v}=(0,i.HF)(null==e?void 0:e.id);return{toggleConversationSetting:(a,i)=>{if(!t)return;let l={};e&&v({settings:{[a]:i,...l}}),o.includes(a)?d({...t.settings,[a]:i}):c.W$.includes(a)&&!e&&n({[a]:i,...l}),u({event_key:"claudeai.conversation.setting.toggled",conversation_uuid:(null==e?void 0:e.id)||null,setting:a,value:i})}}}},45564:(e,n,t)=>{t.d(n,{Q:()=>u,t:()=>c});var a=t(54568),i=t(89256),l=t.n(i),r=t(7620);let o=(0,r.createContext)({isOpen:!1,dropdownToOpen:void 0,openModal:l(),closeModal:l(),clearCallerIdentifier:l()}),u=e=>{let{children:n}=e,[t,i]=(0,r.useState)(!1),l=(0,r.useRef)(void 0),[u,c]=(0,r.useState)(void 0);return(0,a.jsx)(o.Provider,{value:{isOpen:t,openModal:e=>{i(!0),l.current=e},closeModal:()=>{i(!1),c(l.current)},dropdownToOpen:u,clearCallerIdentifier:()=>{c(void 0)}},children:n})},c=()=>(0,r.useContext)(o)},45715:(e,n,t)=>{t.d(n,{AI:()=>s,I5:()=>d,n0:()=>c,qp:()=>v,so:()=>p});var a=t(77186),i=t(1761),l=t(71473);t(77101);var r=t(87606);t(7620);var o=t(91768);let u=e=>{let{documentId:n}=e,{account:t,activeOrganization:r}=(0,i.YL)(),o=null==t?void 0:t.uuid,u=null==r?void 0:r.uuid,c=s();return(0,a.Sk)("/api/organizations/".concat(u,"/sync/mcp/outline/document/").concat(n),{queryKey:[l.hq,{accountUUID:o,orgUUID:u,documentId:n}],enabled:c})},c=e=>{let{uri:n}=e,{data:t,isLoading:a}=u({documentId:n});return{title:null==t?void 0:t.title,isLoading:a}},s=()=>{let{data:e}=(0,o.LN)();return!1},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:n,activeOrganization:t}=(0,i.YL)(),r=null==t?void 0:t.uuid,o=s(),{data:u,refetch:c}=(0,a.Sk)("/api/organizations/".concat(r,"/sync/mcp/outline/auth"),{queryKey:[l.iP,{accountUUID:null==n?void 0:n.uuid,orgUUID:r}],enabled:!!(t&&o),staleTime:5e3}),{mutate:d,isPending:v}=(0,a.L2)("/api/organizations/".concat(r,"/sync/mcp/outline/auth/start"),"POST",{enabled:!!(t&&o),...e,onSuccess:function(){for(var n,t=arguments.length,a=Array(t),i=0;i<t;i++)a[i]=arguments[i];null==(n=e.onSuccess)||n.call(e,...a)}});return{isOutlineAuthenticated:!!(null==u?void 0:u.is_authenticated),refetch:c,initOutlineAuth:d,isLoadingOutlineAuthInit:v}},v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:n,activeOrganization:t}=(0,i.YL)(),o=null==n?void 0:n.uuid,u=null==t?void 0:t.uuid,c=s(),d=(0,r.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(u,"/sync/mcp/outline/auth"),"DELETE",{enabled:!!(t&&c),...e,onSuccess:function(){for(var n,t=arguments.length,a=Array(t),i=0;i<t;i++)a[i]=arguments[i];d.invalidateQueries({queryKey:[l.iP,{accountUUID:o,orgUUID:u}]}),null==(n=e.onSuccess)||n.call(e,...a)}})},p=()=>{let e=encodeURIComponent(window.location.href);window.location.href="/settings/connectors?redirect_url=".concat(e,"&open_outline_auth=true")}},71436:(e,n,t)=>{t.d(n,{Cq:()=>m,b4:()=>b,nB:()=>_,rW:()=>y,tn:()=>S});var a=t(77186),i=t(1761),l=t(71473),r=t(77101),o=t(90119),u=t(87606),c=t(62942),s=t(7620),d=t(91768),v=t(40459);let p="github_success",g=e=>{let{shouldFetch:n=!1}=e,{activeOrganization:t}=(0,i.YL)(),r=null==t?void 0:t.uuid,o=m();return(0,a.Sk)("/api/organizations/".concat(r,"/sync/github/auth"),{queryKey:[l.Hv,{orgUUID:r}],enabled:!!(n&&t&&o)})},_=function(){var e;let{callerIdentifier:n,toggleGithubModalOpen:t,fetchImmediately:l=!1,returnToOrigin:r=!1,target:u="_blank"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:v}=(0,i.YL)(),_=null==v?void 0:v.uuid,y=m(),[b,h]=(0,s.useState)(l),f=g({shouldFetch:b}),S=(0,s.useCallback)(async()=>{var e,n;return b?null==(n=f.data)?void 0:n.is_authenticated:(h(!0),null==(e=(await f.refetch()).data)?void 0:e.is_authenticated)},[f,b]),{mutate:L}=(0,a.L2)("/api/organizations/".concat(_,"/sync/github/auth/start"),"POST",{enabled:!!(v&&y),onSuccess:e=>{window.open(e.redirect_url,u)}}),w="".concat(p,"=").concat(n);(0,d.FZ)({callerIdentifier:n,successParam:p,handleOpen:()=>{null==t||t(!0)}});let I=(0,c.useSearchParams)(),T=(0,o.V)(),E=(0,s.useRef)(!1),A=(0,c.usePathname)(),C=(0,d.dH)({pathname:r?A:"/new",searchParams:I,queryString:w,isClaudeApp:T});return{checkIsGithubAuthenticated:S,initGithubAuth:()=>{if(y){if(T)return void window.open("/settings/connectors?open_in_browser=1&auth_start=github&origin=".concat(C));E.current||(E.current=!0,L({pre_auth_state:{origin:C}}))}},isGithubAuthenticated:null==(e=f.data)?void 0:e.is_authenticated,isLoading:f.isLoading}},y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,i.YL)(),t=null==n?void 0:n.uuid,r=m(),o=(0,u.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(t,"/sync/github/auth"),"DELETE",{enabled:!!(n&&r),...e,onSuccess:function(){for(var n,a=arguments.length,i=Array(a),r=0;r<a;r++)i[r]=arguments[r];o.invalidateQueries({queryKey:[l.Hv,{orgUUID:t}]}),null==(n=e.onSuccess)||n.call(e,...i)}})},m=()=>{let{data:e}=(0,d.LN)(),n=(0,i.mV)(),t=!!(Array.isArray(e)&&e.find(e=>e.type===r.v8.GITHUB&&e.enabled));return!!(!v.env.NEXT_PUBLIC_DISABLE_GITHUB_INTEGRATION&&(!n||t))},b=()=>{let{activeOrganization:e}=(0,i.YL)(),n=null==e?void 0:e.uuid,t=m();return(0,a.Sk)("/api/organizations/".concat(n,"/sync/github/repos"),{queryKey:[l.jL,{orgUUID:n}],enabled:!!(e&&t),meta:{noToast:!0}})},h=e=>{let{owner:n,repo:t,branch:r}=e,{activeOrganization:o}=(0,i.YL)(),u=null==o?void 0:o.uuid,c=m(),s=new URLSearchParams({owner:null!=n?n:"",repo:null!=t?t:""}).toString();return(0,a.Sk)("/api/organizations/".concat(u,"/sync/github/repo?").concat(s),{queryKey:[l.yB,{orgUUID:u,owner:n,repo:t}],enabled:!!(n&&t&&!r&&o&&c),meta:{noToast:!0}})},f=e=>{let{owner:n,repo:t,branch:r}=e,{activeOrganization:o}=(0,i.YL)(),u=null==o?void 0:o.uuid,c=m();return(0,a.Sk)("/api/organizations/".concat(u,"/sync/github/repo/").concat(n,"/").concat(t,"/tree/").concat(r),{queryKey:[l.o6,{orgUUID:u,owner:n,repo:t,branch:r}],staleTime:3e5,enabled:!!(n&&t&&r&&o&&c),meta:{noToast:!0}})},S=e=>{var n;let{owner:t,repo:a,branch:i}=e,l=h({owner:t,repo:a,branch:i}),r=f({owner:t,repo:a,branch:i||(null==(n=l.data)?void 0:n.default_branch)});return{data:{repo:l.data,tree:r.data},isFetching:l.isFetching||r.isFetching,error:l.error||r.error}}},85717:(e,n,t)=>{t.d(n,{$f:()=>q,K6:()=>Y,KY:()=>w,L5:()=>P,LP:()=>S,U5:()=>T,cI:()=>I,ef:()=>K,fb:()=>z,kJ:()=>L,qL:()=>C,vT:()=>D,y:()=>E,yy:()=>h,zF:()=>A,zH:()=>k});var a=t(68096),i=t(77186),l=t(1761),r=t(71473),o=t(27062),u=t(77101),c=t(90119),s=t(87606),d=t(62942),v=t(7620),p=t(98251),g=t(45564),_=t(93049),y=t(91768),m=t(40459);let b="gdrive_success",h=()=>{let e=(0,l.mV)(),{data:n}=(0,y.LN)(),t=!!(Array.isArray(n)&&n.find(e=>e.type===u.v8.GDRIVE&&e.enabled));return!e||t},f=()=>{let{value:e}=(0,o.fS)("kingfisher_enabled");return e},S=()=>{let e=h(),n=f();return!!(!m.env.NEXT_PUBLIC_DISABLE_GDRIVE_INTEGRATION&&n&&e)},L=()=>{let{account:e,activeOrganization:n}=(0,l.YL)(),t=null==n?void 0:n.uuid,a=S(),{data:o,isFetched:u}=(0,i.Sk)("/api/organizations/".concat(t,"/sync/mcp/drive/auth"),{queryKey:[r.jR,{accountUUID:null==e?void 0:e.uuid,orgUUID:t}],enabled:a,staleTime:3e5});return{isAuthenticated:a&&!!(null==o?void 0:o.is_authenticated),isFetched:u}},w=e=>{let{callerIdentifier:n,returnToOrigin:t=!1,target:a}=e,o=(0,d.usePathname)(),{account:u,activeOrganization:p}=(0,l.YL)(),g=null==u?void 0:u.uuid,_=null==p?void 0:p.uuid,m=S(),h=(0,s.useQueryClient)(),f=(0,c.V)(),L=(0,d.useSearchParams)(),{mutate:w}=(0,i.L2)("/api/organizations/".concat(_,"/sync/mcp/drive/auth/start"),"POST",{enabled:m,onSuccess:e=>{window.open(e.redirect_url,a)}}),I=(0,v.useRef)(!1);return()=>{if(!m)return;let e="".concat(b,"=").concat(n),a=(0,y.dH)({pathname:t?o:"/new",searchParams:L,queryString:e,isClaudeApp:f});if(h.invalidateQueries({queryKey:[r.jR,{accountUUID:g,orgUUID:_}]}),f)return void window.open("/settings/connectors?open_in_browser=1&auth_start=gdrive&origin=".concat(a));I.current||(I.current=!0,w({pre_auth_state:{origin:a},redirect_uri:new URL("/connect/mcp/drive/callback",window.location.origin).toString()}))}},I=function(){let{callerIdentifier:e,handleAuthSuccess:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{isAuthenticated:t,isFetched:a}=L(),{dropdownToOpen:i,clearCallerIdentifier:l}=(0,g.t)(),r=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];null==n||n(e)},o=w({callerIdentifier:e});return(0,y.FZ)({callerIdentifier:e,successParam:b,handleOpen:r}),(0,v.useEffect)(()=>{e&&i===e&&(null==n||n(!0),l())},[i,n,e,l]),{isDriveAuthenticated:t,initDriveAuth:o,handleDriveTrigger:r,isFetched:a}},T=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:n,activeOrganization:t}=(0,l.YL)(),a=null==n?void 0:n.uuid,o=null==t?void 0:t.uuid,u=S(),c=(0,s.useQueryClient)(),{mutate:d}=(0,p.ih)();return(0,i.L2)("/api/organizations/".concat(o,"/sync/mcp/drive/auth"),"DELETE",{enabled:!!(t&&u),...e,onSuccess:function(){for(var n,t=arguments.length,i=Array(t),l=0;l<t;l++)i[l]=arguments[l];c.invalidateQueries({queryKey:[r.jR,{accountUUID:a,orgUUID:o}]}),d({}),null==(n=e.onSuccess)||n.call(e,...i)}})},E=e=>{let{documentId:n}=e,{account:t,activeOrganization:a}=(0,l.YL)(),o=null==t?void 0:t.uuid,u=null==a?void 0:a.uuid,c=S(),d=(0,s.useQueryClient)(),p=(0,i.Sk)("/api/organizations/".concat(u,"/sync/mcp/drive/document/").concat(n,"?include_content=false"),{queryKey:[r.QB,{accountUUID:o,orgUUID:u,documentId:n}],enabled:c,meta:{noToast:!0}}),g=p.isError;return(0,v.useEffect)(()=>{g&&d.invalidateQueries({queryKey:[r.jR,{accountUUID:o,orgUUID:u}]})},[d,g,o,u]),p};function A(e){let{uri:n}=e,{data:t,isLoading:a}=E({documentId:n});return{title:null==t?void 0:t.title,isLoading:a}}let C=e=>{let{account:n,activeOrganization:t}=(0,l.YL)(),a=null==n?void 0:n.uuid,o=null==t?void 0:t.uuid,u=S(),c=(0,v.useMemo)(()=>e.map(e=>"/api/organizations/".concat(o,"/sync/mcp/drive/document/").concat(e)),[e,o]),s=(0,v.useMemo)(()=>({queryKey:e.map(e=>[r.qM,{accountUUID:a,orgUUID:o,documentId:e}]),enabled:u,meta:{noToast:!0}}),[e,a,o,u]);return(0,i._i)(c,s)},k=e=>{let{account:n,activeOrganization:t}=(0,l.YL)(),a=null==n?void 0:n.uuid,o=null==t?void 0:t.uuid,u=S(),c=(0,_.bI)(),{data:s,isSuccess:d,isLoading:p}=(0,i.Sk)("/api/organizations/".concat(o,"/sync/mcp/drive/recents"),{queryKey:[r.zu,{accountUUID:a,orgUUID:o}],enabled:e&&u,meta:{noToast:!0}});return(0,v.useEffect)(()=>{if(d&&s){let e=s.map(e=>{let{uri:n,title:t}=e;return{uri:n,title:t}});(0,_.Ac)(e)}},[d,s]),{recentDriveDocs:d?s:c,isLoading:p}},z=()=>{let e=f(),{value:n}=(0,o.fS)("apps_use_bananagrams");return e&&n},Y=()=>{let e=S(),n=z();return e&&n&&!m.env.NEXT_PUBLIC_DISABLE_GDRIVE_INTEGRATION},q=e=>{var n;let t=Y(),{account:a}=(0,l.YL)();return!!t&&(e?!!(null==e||null==(n=e.conversationSettings)?void 0:n.enabled_bananagrams):!!(null==a?void 0:a.settings.enabled_bananagrams))},P=()=>(0,o.fS)("rag_prototype").value,D=()=>{let e=Y(),n=(0,l.mV)(),{data:t}=(0,y.LN)(),{account:a}=(0,l.YL)(),i=P();return!!e&&!!i&&(n?!!(Array.isArray(t)&&t.find(e=>{var n;return e.type===u.v8.GDRIVE&&e.enabled&&(null==(n=e.config)?void 0:n.allow_indexing)})):!!(null==a?void 0:a.settings.enabled_gdrive_indexing))},K=()=>{let{account:e}=(0,l.YL)(),{mutate:n}=(0,a.Jy)(),{mutate:t}=(0,p.Bg)();return{toggleDriveSearchAndIndexingEnabled:a=>{var i;let{indexingEnabled:l,searchEnabled:r,dismissBanner:o}=a,u=o||!!l;l&&t({}),n({...null==e?void 0:e.settings,...void 0!==l?{enabled_gdrive_indexing:l}:null,...void 0!==r||!0===l?{enabled_bananagrams:null!=l?l:r}:null,...u?{dismissed_claudeai_banners:[...(null==e||null==(i=e.settings)?void 0:i.dismissed_claudeai_banners)||[],{banner_id:"drive_indexing_enablement_2/11_1",dismissed_at:new Date().toISOString()}]}:null})}}}},92947:(e,n,t)=>{t.d(n,{Ic:()=>b,Hj:()=>z,Cc:()=>C,Ib:()=>E,QD:()=>w,gt:()=>h,sb:()=>f,BN:()=>L,M8:()=>T,AY:()=>I,es:()=>A}),t(98878);var a=t(68096),i=t(7726),l=t(98518),r=t(1761),o=t(27062),u=t(90119),c=t(97136),s=t.n(c),d=t(62942),v=t(7620),p=t(75006),g=t(57383),_=t(21036),y=t(45078),m=t(91768);let b=(0,v.createContext)({mcpClients:{},servers:[],mcpTools:[],isLoading:!1,isEnabled:!1}),h=()=>{let e=(0,v.useContext)(b);return e||console.warn("useMcp being used outside of McpProvider, this is probably a bug"),e},f=()=>{let{value:e}=(0,o.fS)("bagel_enabled");return e},S=()=>{let{value:e}=(0,o.fS)("claude_ai_allow_tool_always_allow");return e},L=()=>{let e=S(),{getMcpToolApprovalRequestSetting:n}=function(){let{value:e}=(0,_.useDynamicConfig)("mcp_tool_approval_config"),n=(0,v.useCallback)((n,t,a)=>{var i,l,r,o;return e?(null==(i=e[n])?void 0:i[t])!==void 0?e[n][t]:(null==(l=e[n])?void 0:l["*"])!==void 0?e[n]["*"]:(null==(r=e["*"])?void 0:r[t])!==void 0?e["*"][t]:(null==(o=e["*"])?void 0:o["*"])!==void 0?e["*"]["*"]:a:a},[e]);return{toolApprovalConfig:e,getMcpToolApprovalRequestSetting:n}}();return{getApprovalSetting:(0,v.useCallback)((t,a)=>{var i;let l=n(null!=t?t:"",null!=(i=null==a?void 0:a.name)?i:"",e?"perChat":"always");return{approvalSetting:l,alwaysAllowEnabled:"perChat"===l}},[e,n])}},w=function(){let{returnToOrigin:e=!1,target:n="_blank"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,r.YL)(),a=(0,d.usePathname)(),i=(0,d.useSearchParams)(),o=(0,u.V)(),{track:c}=(0,l.st)(),s=(0,m.dH)({pathname:e?a:"/new",searchParams:i,queryString:"",isClaudeApp:o});return e=>{let{uuid:a}=e;c({event_key:"claudeai.mcp.auth.init",uuid:a}),o?window.open("/api/organizations/".concat(null==t?void 0:t.uuid,"/mcp/start-auth/").concat(a,"?redirect_url=").concat(s,"&open_in_browser=1")):window.open("/api/organizations/".concat(null==t?void 0:t.uuid,"/mcp/start-auth/").concat(a,"?redirect_url=").concat(s,"&open_in_browser=1"),n)}},I=()=>{let{servers:e}=h();return!!(0,u.V)()&&(e.filter(e=>{let{type:n}=e;return"local"===n})||[]).length>0},T=()=>{var e,n,t;let a=(0,g.o)(),i=(null==(e=a.pendingConversationSettings)?void 0:e.compass_mode)==="advanced"||(null==(t=a.conversation)||null==(n=t.conversationSettings)?void 0:n.compass_mode)==="advanced",{servers:l}=h(),r=(l.filter(e=>{let{type:n}=e;return"remote"===n})||[]).length>0;return i&&r},E=()=>{var e;let n=null!=(e=(0,y.vP)("enabled_mcp_tools"))?e:{};return(0,v.useMemo)(()=>Object.entries(n).filter(e=>{let[n,t]=e;return!!t}).map(e=>{let[n]=e;return n}),[n])},A=()=>{let{conversation:e}=(0,g.o)(),{account:n}=(0,r.YL)(),{track:t}=(0,l.st)(),{mutate:o}=(0,a.Jy)(),{mutate:u}=(0,i.HF)(null==e?void 0:e.id);return{toggleMcpToolEnabled:(a,i)=>{if(!n)return;let l=Array.isArray(a)?a.reduce((e,n)=>({...e,[n]:i}),{}):{[a]:i};if(e){var r;u({settings:{enabled_mcp_tools:{...null==(r=e.conversationSettings)?void 0:r.enabled_mcp_tools,...l}}})}let c=n.settings.enabled_mcp_tools;o({...n.settings,enabled_mcp_tools:{...c,...l}}),t({event_key:"claudeai.mcp.tool.toggled",conversation_uuid:(null==e?void 0:e.id)||null,setting:a,value:i})},toggleMcpToolAlwaysApproved:(e,t,a)=>{if(!n)return;let i=z(e,t),l=n.settings.enabled_mcp_tools;o({...n.settings,enabled_mcp_tools:{...l,[i]:a}})}}};function C(e,n){return"".concat(e,":").concat(n)}let k=p.z.object({description:p.z.string().optional(),type:p.z.string().optional(),title:p.z.string().optional()}).optional();function z(e,n){let t=C(e,n.name),a=n.description||"",i=function(e){var n;let t=Object.entries((null==(n=e.inputSchema)?void 0:n.properties)||{}),a=[];for(let[e,n]of t){let{data:t}=k.safeParse(n),i=(null==t?void 0:t.description)||"";a.push([e,i])}return a.sort((e,n)=>e[0].localeCompare(n[0])).flat().join(",")}(n),l=s().createHash("md5").update("".concat(a,":").concat(i)).digest("hex");return"".concat(t,"-").concat(l)}},98251:(e,n,t)=>{t.d(n,{Bg:()=>c,fR:()=>v,iV:()=>d,ih:()=>s});var a=t(77186),i=t(1761),l=t(51121),r=t(71473),o=t(77101),u=t(87606);let c=()=>{let{account:e,activeOrganization:n}=(0,i.YL)(),t=null==e?void 0:e.uuid,c=null==n?void 0:n.uuid,{addError:s}=(0,l.Y)(),d=(0,u.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(c,"/sync/mcp/drive/ingest"),"POST",{onSuccess:()=>{setTimeout(()=>{d.invalidateQueries({queryKey:[r.hx,{orgUuid:c,accountUuid:t,syncSourceType:o.v8.GDRIVE}]})},300)},onError:e=>{s(e)}})},s=()=>{let{activeOrganization:e}=(0,i.YL)(),n=null==e?void 0:e.uuid,{addError:t}=(0,l.Y)(),c=(0,u.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(n,"/sync/ingestion/gdrive/clean_up"),"POST",{onSuccess:()=>{c.invalidateQueries({queryKey:[r.hx,{orgUuid:n,syncSourceType:o.v8.GDRIVE}]})},onError:e=>{t(e)}})},d=e=>{let{activeOrganization:n}=(0,i.YL)(),t=null==n?void 0:n.uuid,l=(0,u.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(t,"/projects/").concat(e,"/kb/resync"),"POST",{enabled:!!e,meta:{noToast:!0},onSuccess:n=>{"done"===n.status&&l.invalidateQueries({queryKey:[r.qz,{orgUuid:t,projectUuid:e}]})}})},v=function(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{activeOrganization:t}=(0,i.YL)(),l=null==t?void 0:t.uuid;return(0,a.Sk)("/api/organizations/".concat(l,"/projects/").concat(e,"/kb/stats"),{queryKey:[r.qz,{orgUuid:l,projectUuid:e}],enabled:!!e&&n})}}}]);